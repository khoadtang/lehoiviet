<div ng-init="initData()">
<!-- <div id="mainpost"> -->
<div id="post-create">
  <div class="profile_area">
      <!-- left column -->
      <div class="sidebar">
          <div class="tabAction">
            <div class="user">
              Hương
              <img src="assets/img/avatar.png" class="img-circle" alt="avatar"/>
            </div>
              <ul class="infoList">
                <li class="action" id="eventPost" ng-click="onChangeTab('eventPost')">
                    <span>1</span>Thông tin sự kiện
                </li>
                <li id="detailPost" ng-click="onChangeTab('detailPost')">
                    <span>2</span>Thông tin chi tiết
                </li>
                <li id="last" ng-click="onChangeTab('last')">
                    <span>3</span>Thông tin nhà tổ chức
                </li>
              </ul>
          </div>
      </div>
      <!-- edit form column -->
      <div class="infoTab">
          <section class="eventPostTab feedback-form infoUserTab">
              <div class="imageHeader">
                <img ng-src="http://lehoiviet.herokuapp.com{{backgroundFestival}}" alt="" class="img-responsive"/>
                <div class="bg-tran"></div>
                <div class="btn-position-upload" ng-show="!isUploading">
                  <div class="file-input btn-load-image btn-file">
                    <i class="fa fa-camera" aria-hidden="true"></i>
                      Tải ảnh bìa lên&hellip;
                      <input type="file" name="file" onchange="angular.element(this).scope().onImageSelected(this)" />
                  </div>
                </div>
                <div class="btn-position-upload">
                  <div class="btn-loading">
                    <img class="img-loading" ng-src="http://lehoiviet.herokuapp.com/uploads/posts/thumbnails/img_full_thumbnail_WmxP6qhwjdCelowm81qi.gif"/>
                  </div>
                  </div>
              </div>
                <div class="infomation-box">
                  <form name="info">
                    <div class="infomation-content">
                        <div class="box-info-normal row">
                            <div class="lable col-sm-3 col-xs-12">Tên lễ hội</div>
                            <div class="details col-sm-9 col-xs-12">
                                <input ng-model="title" type="text" name="title" spellcheck="false" placeholder="Bạn phải nhập ít nhất 10 kí tự" ng-minlength='10'/>
                            </div>
                            <div class="col-sm-9 col-sm-offset-3 col-xs-12">
                                <span class="text-error" ng-show="info.title.$dirty && info.title.$invalid">
                                    <span ng-show="info.title.$error.minlength" class="text-error">Bạn phải nhập ít nhất 10 kí tự</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="infomation-content row">
                        <div class="box-info-normal">
                            <div class="lable col-sm-3 col-xs-12">Loại lễ hội</div>
                            <div class="details col-sm-9 col-xs-12">
                                <select class="col-sm-4 col-xs-12" name="typeEvent" ng-model="typeEvent">
                                    <option value="" ng-disabled="true">Chọn Loại Lễ Hội</option>
                                    <option ng-repeat="category in categories" value="{{category._id}}">{{category.name}}</option>
                                </select>
                            </div>
                            <div class="col-sm-9 col-sm-offset-3 col-xs-12">
                                <span class="text-error" ng-show="info.typeEvent.$dirty && info.typeEvent.$invalid">
                                    <span ng-show="info.typeEvent.$error.required">Loại sự kiện là bắt buộc</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="infomation-content row">
                        <div class="box-info-normal">
                            <div class="lable col-sm-3 col-xs-12">Tên địa điểm</div>
                            <div class="details col-sm-9 col-xs-12">
                                <input type="text" ng-model="nameAddress" name='nameAddress' spellcheck="false" required/>
                            </div>
                            <div class="col-sm-9 col-sm-offset-3 col-xs-12">
                                <span class="text-error" ng-show="info.nameAddress.$dirty && info.nameAddress.$invalid">
                                    <span ng-show="info.nameAddress.$error.required">Tên địa điểm là bắt buộc</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="infomation-content row">
                        <div class="box-info-normal">
                            <div class="lable col-sm-3 col-xs-12">Địa chỉ</div>
                            <div class="details col-sm-9 row col-xs-12">
                                <select class="col-sm-4 col-xs-5" ng-model="province">
                                    <option value="" ng-disabled="true">Chọn Tỉnh / Thành Phố</option>
                                    <option ng-repeat="province in provincies" ng-click="onProvinceSelected(province)">{{province.name}}</option>
                                </select>
                                <select class="col-sm-4 col-sm-offset-1 col-xs-5 col-xs-offset-2" ng-model="district">
                                    <option value="" ng-disabled="true">Chọn Huyện / Phường</option>
                                    <option ng-repeat="itemDistricts in districts">{{itemDistricts.name}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="infomation-content row">
                        <div class="box-info-normal">
                            <div class="lable col-sm-3 col-xs-12">Ngày bắt đầu</div>
                            <div class="details col-sm-9 col-xs-12">
                                <input ng-model="timeBegin" type="text" name="timeBegin" spellcheck="false" />
                            </div>
                            <div class="col-sm-9 col-sm-offset-3 col-xs-12">
                                <span class="text-error" ng-show="info.timeBegin.$dirty && info.timeBegin.$invalid">
                                    <span ng-show="info.timeBegin.$error.required">thời gian là bắt buộc</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="infomation-content row">
                        <div class="box-info-normal">
                            <div class="lable col-sm-3 col-xs-12">Ngày kết thúc</div>
                            <div class="details col-sm-9 col-xs-12">
                                <input ng-model="timeEnd" type="text" name="timeEnd" spellcheck="false" />
                            </div>
                            <div class="col-sm-9 col-sm-offset-3 col-xs-12">
                                <span class="text-error" ng-show="info.timeEnd.$dirty && info.timeEnd.$invalid">
                                    <span ng-show="info.timeEnd.$error.required">Thời gian là bắt buộc</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="infomation-content row">
                        <div class="box-info-normal">
                            <div class="lable col-sm-3 col-xs-12">Giá</div>
                            <div class="details col-sm-9 col-xs-12">
                                <input name="priceTicket" ng-model="priceTicket" type="text" onkeypress="return isNumberKey(event)" spellcheck="false" />
                            </div>
                            <div class="col-sm-9 col-sm-offset-3 col-xs-12">
                                <span class="text-error" ng-show="info.priceTicket.$dirty && info.priceTicket.$invalid">
                                    <span ng-show="info.priceTicket.$error.required">Giá là bắt buộc</span>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div style="text-align: right">
                      <button class="hvr-shutter-out-horizontal" ng-click="gotoDetail('detailPost')">Tiếp tục</button>
                    </div>
                  </form>
                </div>
          </section>
          <!--end:lastReview-->
          <section class="hide detailPostTab feedback-form infoUserTab">
            <div class="infomation-box">
              <div class="infomation-content row">
                  <div class="box-info-normal">
                      <div class="lable col-sm-3 col-xs-12">Mô tả sơ lược</div>
                      <div class="details col-sm-9 col-xs-12">
                          <input ng-model="description" type="text" spellcheck="false" />
                      </div>
                  </div>
              </div>
              <div class="infomation-content row">
                  <div class="box-info-normal">
                      <div class="lable col-sm-3 col-xs-12">Thông tin chi tiết</div>
                      <div class="details col-sm-9 col-xs-12">
                          <textarea rows="5" ng-model="content" spellcheck="false" lhv-editor placeholder="Những thông tin và hoạt động diễn ra trong lễ hội" />
                      </div>
                  </div>
              </div>
              <div class="listEvent">
                <h3>Sự kiện đã tạo:</h3>
                <table class="table">
                  <tbody>
                    <tr>
                      <td>Lễ hội trăng rằm</td>
                      <td class="center" width="30">
                        <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="box-event hide">
                <div class="infomation-content row">
                    <div class="box-info-normal">
                        <div class="lable col-sm-3 col-xs-12">Tên sự kiện</div>
                        <div class="details col-sm-9 col-xs-12">
                            <input ng-model="nameEvent" type="text" spellcheck="false" />
                        </div>
                    </div>
                </div>
                <div class="infomation-content row">
                    <div class="box-info-normal">
                        <div class="lable col-sm-3 col-xs-12">Từ</div>
                        <div class="details col-sm-9 col-xs-12">
                            <input ng-model="timeBeginEvent" type="text" name="timeBeginEvent" spellcheck="false" />
                        </div>
                        <div class="col-sm-9 col-sm-offset-3 col-xs-12">
                            <span class="text-error" ng-show="info.timeBeginEvent.$dirty && info.timeBeginEvent.$invalid">
                                <span ng-show="info.timeBeginEvent.$error.required">thời gian là bắt buộc</span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="infomation-content row">
                    <div class="box-info-normal">
                        <div class="lable col-sm-3 col-xs-12">Đến</div>
                        <div class="details col-sm-9 col-xs-12">
                            <input ng-model="timeEndEvent" type="text" name="timeEndEvent" spellcheck="false" />
                        </div>
                        <div class="col-sm-9 col-sm-offset-3 col-xs-12">
                            <span class="text-error" ng-show="info.timeEndEvent.$dirty && info.timeEndEvent.$invalid">
                                <span ng-show="info.timeEndEvent.$error.required">Thời gian là bắt buộc</span>
                            </span>
                        </div>
                    </div>
                </div>
                <div style="text-align:center">
                  <button type="button" name="button" class="btn-blue">Hoàn tất</button>
                </div>
              </div>
            </div>
              <div class="event">
                  <button type="button" name="button" class="btn-create-event" ng-click="createEventFestival()"><i class="fa fa-calendar-plus-o" aria-hidden="true"></i>Thêm sự kiện</button>
              </div>
          </section>
          <!--end:lastReview-->
          <section class="hide lastTab feedback-form infoUserTab">
              <div class="infomation-box">
                <div class="infomation-content row">
                    <div class="box-info-normal">
                        <div class="lable col-sm-3 col-xs-12">Điện thoại</div>
                        <div class="details col-sm-9 col-xs-12">
                            <input ng-model="phoneNumber" type="text" onkeypress="return isNumberKey(event)" />
                        </div>
                    </div>
                </div>
                <div class="infomation-content row">
                    <div class="box-info-normal">
                        <div class="lable col-sm-3 col-xs-12">Email</div>
                        <div class="details col-sm-9 col-xs-12">
                            <input type="email" ng-model="emailAddress" name='emailAddress' spellcheck="false" />
                        </div>
                        <div class="col-sm-9 col-sm-offset-3 col-xs-12">
                            <span ng-show="createPostForm.emailAddress.$error.email">Email không hợp lệ</span>
                        </div>
                    </div>
                </div>
                <div class="infomation-content row">
                    <div class="box-info-normal">
                        <div class="lable col-sm-3 col-xs-12">Website</div>
                        <div class="details col-sm-9 col-xs-12">
                            <input ng-model="website" type="text" spellcheck="false" />
                        </div>
                    </div>
                </div>
              </div>
              <div style="text-align:center">
                  <button ng-click="onCreateFestival()" class="create-festival hvr-shutter-out-horizontal"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Thêm lễ hội</button>
              </div>
          </section>

        </div>
      </div>
  </div>
</div>
</div>
<!--alert succes delete post-->
<div class="modal fade" id="post-success" tabindex="-1" role="dialog" aria-hidden="true" style="margin-top: 10px;">
    <div class="modal-dialog modal-sm">
        <form role="form" name="forgotPassword">
            <div class="modal-content">
                <div class="modal-body" style="text-align: center;">
                    <div class="row">
                        <label class="col-xs-12" style="font-size: 20px; margin-bottom: 20px; margin-top: 20px;">Đăng bài thành công</label>
                        <div class="col-xs-12 ">
                        </div>
                        <a href="#/" type="button" class="btn btn-primary">Đồng ý</a>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<script>
$(function() {

    $('input[name="timeBegin"]').daterangepicker({
        "singleDatePicker": true,
        timePicker: true,
        timePickerIncrement: 5,
        locale: {
            format: 'DD/MM/YYYY HH:mm:ss'
        }
    });

    $('input[name="timeEnd"]').daterangepicker({
        "singleDatePicker": true,
        timePicker: true,
        timePickerIncrement: 5,
        locale: {
            format: 'DD/MM/YYYY HH:mm:ss'
        }
    });
});
//upload and display image
$(function() {
    $(":file").change(function() {
        if (this.files && this.files[0]) {
            var reader = new FileReader();
            reader.onload = imageIsLoaded;
            reader.readAsDataURL(this.files[0]);
        }
    });
});

function imageIsLoaded(e) {
    $("#listImage").empty();
    $("#listImage").append("<li class='col-xs-4'><img id='imgThumbnail' class='imgsize' src='#'/><div class='delete' onclick='removeImgThumbnail()';><span>x</span></div></li>");
    $('#imgThumbnail').attr('src', e.target.result);

};

$("#listImage").on("click", "li", function() {

});

function removeImgThumbnail() {
    $("#listImage").empty();
}
</script>
